(function(e){function t(t){for(var r,s,l=t[0],i=t[1],c=t[2],d=0,g=[];d<l.length;d++)s=l[d],o[s]&&g.push(o[s][0]),o[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);u&&u(t);while(g.length)g.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,l=1;l<n.length;l++){var i=n[l];0!==o[i]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=i;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("64a9"),o=n.n(r);o.a},1:function(e,t){},2:function(e,t){},"23af":function(e,t,n){"use strict";var r=n("6c96"),o=n.n(r);o.a},"23be":function(e,t,n){"use strict";var r=n("79a2"),o=n.n(r);t["default"]=o.a},3:function(e,t){},"3dfd":function(e,t,n){"use strict";var r=n("9439"),o=n("23be"),a=(n("034f"),n("2877")),s=Object(a["a"])(o["default"],r["a"],r["b"],!1,null,null,null);t["default"]=s.exports},4:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),o=n("5c96"),a=n.n(o),s=(n("0fae"),n("3dfd")),l=n("8c4f"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("SearchComponent"),n("OrgListComponent")],1)},c=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"searchComponent"},[n("H1",[e._v("ORG.ID explorer")]),n("el-row",[n("el-col",{attrs:{span:22}},[n("el-input",{attrs:{placeholder:"Enter your ORG.ID address"},on:{click:function(t){return e.explore()}},model:{value:e.orgId,callback:function(t){e.orgId=t},expression:"orgId"}})],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.explore()}}},[e._v("Explore")])],1)],1)],1)},d=[],g={name:"search",data(){return{orgId:null}},methods:{explore(){console.log("Searching for org id "+this.orgId),this.$router.push(""),console.log("pushed to empty"),this.$router.push("/explore/"+this.orgId)}}},f=g,p=(n("8749"),n("2877")),h=Object(p["a"])(f,u,d,!1,null,"f9b1ebd4",null),m=h.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"orgListComponent"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{label:"ORG ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("router-link",{attrs:{to:{path:"/explore/"+t.row.org_id}}},[e._v(e._s(t.row.org_id))])]}}])}),n("el-table-column",{attrs:{label:"Name"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v(e._s(e.parseName(t.row.json_text)))])]}}])}),n("el-table-column",{attrs:{prop:"lif_balance",label:"LIF Balance"}}),n("el-table-column",{attrs:{prop:"segment",label:"Segment"}}),n("el-table-column",{attrs:{label:"Actions"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{on:{click:function(n){return e.goToVerify(t.row.org_id)}}},[e._v("Verify Signed Msg")])]}}])})],1)],1)},b=[],_=n("bc3a"),y=n.n(_),O=n("5987"),w=n("a475"),I=n.n(w),x={getLibs(){return O["WtJsLibs"].createInstance({onChainDataOptions:{provider:this.getProvider()},offChainDataOptions:{adapters:{"in-memory":{options:{},create:e=>{return new I.a(e)}}}}})},getProvider(){return"https://ropsten.infura.io/v3/7714245c4ea74010879bda16618931c9"},getWeb3(){}},C={name:"orgListComponent",data(){return{tableData:[]}},mounted(){this.loadOrgs()},methods:{async loadOrgs(){var e=await y.a.get("https://wt-explorer.multilanguage.xyz/backend/orgs");console.log("Data: ",JSON.stringify(e.data)),this.tableData=e.data,console.log("After parsing: "+this.tableData)},parseName(e){console.log("jsonString: "+e);try{var t=JSON.parse(e)}catch(n){return"NOT AVAILABLE"}return null==t||null==t.legalEntity?"NOT AVAILABLE":t.legalEntity.name},goToVerify(e){this.$router.push("/verify?orgId="+e)}}},S=C,k=(n("574f"),Object(p["a"])(S,v,b,!1,null,"31e74cc8",null)),j=k.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"verifySignature"},[n("el-row",[n("el-col",{attrs:{span:20}},[n("el-input",{attrs:{placeholder:"orgIdAddress"},model:{value:e.orgId,callback:function(t){e.orgId=t},expression:"orgId"}})],1),n("el-col",{attrs:{span:20}},[n("el-input",{attrs:{placeholder:"message"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),n("el-col",{attrs:{span:20}},[n("el-input",{attrs:{placeholder:"signature"},model:{value:e.signature,callback:function(t){e.signature=t},expression:"signature"}})],1),n("el-col",{attrs:{span:4}},[n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.verifySiganture()}}},[e._v("Verify Signature")])],1)],1),!0===e.signaturesMatch?n("div",[n("br"),e._v("\n        The Signer of the supplied message matches the Org ID\n    ")]):e._e(),!1===e.signaturesMatch?n("div",[n("br"),e._v("\n        The Signer of the supplied message does not match the Org ID\n    ")]):e._e()],1)},J=[],L=n("9792"),E=(n("f5e0"),n("f1e6"),n("66f7"),n("f616")),U=n.n(E),T=(n("decd"),n("477d"),{name:"VerifySignature",data(){return{orgId:this.$route.query.orgId,message:null,signature:null,signaturesMatch:null}},methods:{async verifySiganture(){const e=Object(L["Accounts"])("https://ropsten.infura.io/v3/7714245c4ea74010879bda16618931c9");let t=e.recover(this.message,this.signature);console.log("signer is "+t),this.signaturesMatch=t.toLowerCase()===this.orgId.toLowerCase()}}}),$=T,N=Object(p["a"])($,D,J,!1,null,"47c92e83",null),P=N.exports,R={name:"Home",components:{SearchComponent:m,OrgListComponent:j},data(){return{}},mounted(){}},B=R,A=(n("23af"),Object(p["a"])(B,i,c,!1,null,"4c0a4922",null)),M=A.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"test"},[n("SearchComponent"),n("el-row",[n("el-col",{attrs:{span:16}},[n("div",[n("p",[n("strong",[e._v("org.id:")]),e._v(" "+e._s(e.orgId))]),n("p",[n("strong",[e._v("owner:")]),e._v(" "+e._s(e.owner))]),n("p",[n("strong",[e._v("json URL:")]),e._v(" Â "),n("a",{attrs:{href:e.jsonUrl,target:"_blank"}},[e._v(e._s(e.jsonUrl))])]),n("p",{staticClass:"json"},[n("strong",[e._v("json:")])]),n("pre",{staticClass:"code"},[e._v(e._s(e.orgJson))])])]),n("el-col",{attrs:{span:8}},[n("div",[n("p",[n("strong",[n("img",{staticClass:"lif-logo",attrs:{src:"https://lif.windingtree.com/static/img/lif.svg"}}),e._v(" LIF balance:")]),e._v(" "+e._s(e.lifBalance))]),n("p",[n("strong",[e._v("DNS verification (using wt-hackathon trust service):")]),e._v(" "+e._s(e.trustWebsite))])])])],1)],1)},V=[],W=n("6f94"),F={name:"Explore",components:{SearchComponent:m},data(){return{orgId:null,libs:null,jsonUrl:null,orgJson:null,lifBalance:null,trustWebsite:null,owner:null}},mounted(){this.libs=x.getLibs(),this.orgId=this.$route.params.orgId,this.getOrgJson()},beforeRouteUpdate(e,t,n){console.log("Calling beforeRouteUpdate"),this.orgId=e.params.orgId,this.getOrgJson(),n()},methods:{async getOrgJson(){console.log("Parameter is "+this.orgId),this.loadedOrg=this.libs.getOrganization(this.orgId);var e=this;this.loadedOrg.orgJsonUri.then(function(t){console.log("Calling from inside promise"),e.jsonUrl=t,e.loadJsonFromUrl(t),e.loadLifBalance(e.orgId),e.getWebsiteTrustClue(e.orgId)}).catch(e=>{this.orgJson=e}),this.owner=await this.loadedOrg.owner,console.log("Call done")},async loadJsonFromUrl(e){var t=await y.a.get(e);console.log(JSON.stringify(t)),this.orgJson=t.data},async loadLifBalance(e){console.log("loading lif balance: "+JSON.stringify(e));var t=await this.getLifTokenTestContract(),n=await t.balanceOf(e);this.lifBalance=n.toString()},async getLifTokenTestContract(){let e=U()(W);return e.setProvider(x.getProvider()),e.at("0xB6e225194a1C892770c43D4B529841C99b3DA1d7")},async getWebsiteTrustClue(e){var t=await y.a.get("http://caramon.kunveni.net:5010/clue/dns?organization="+e);this.trustWebsite=t.data.trusted}}},z=F,H=(n("d466"),Object(p["a"])(z,G,V,!1,null,"049adfe5",null)),q=H.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"createOrgId"},[n("h1",[e._v("Create an ORG.ID")]),n("h3",[e._v("This service lets you create an ORG.ID.")]),n("h3",[e._v("Please enter below the URI of your organization JSON.")]),n("h4",[e._v("Note that you need to have the Metamask browser extension installed, and an ethereum account with some fund$ in it.")]),n("el-row",[n("el-col",{attrs:{span:20}},[n("el-input",{attrs:{placeholder:"Enter ORG JSON URI"},model:{value:e.orgJsonUri,callback:function(t){e.orgJsonUri=t},expression:"orgJsonUri"}})],1),n("el-col",{attrs:{span:4}},[n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.callCreateOrg()}}},[e._v("Create ORG.ID!")])],1)],1)],1)},Q=[],X=n("c039"),Y=n.n(X),Z=n("d04a"),ee={name:"createOrgId",data(){return{orgJsonUri:null}},methods:{callCreateOrg(){if(!window.ethereum||!window.web3)throw new Error("Metamask not found. Is it installed as an extension?");window.ethereum.enable();let e=new Y.a(window.web3.currentProvider);e.accounts().then(t=>{let n=t[0];const r="0x78D1548E03660093B51159De0E615ea8F6B9eaF9";var o=e.contract(Z.abi,void 0,{from:n,gas:3e6}).at(r);o["create"](this.orgJsonUri).then(e=>{console.log("txid: ",e)}).catch(e=>{console.log("error: ",e)})}).catch(e=>{console.log("error: ",e)})}}},te=ee,ne=Object(p["a"])(te,K,Q,!1,null,"1839ad50",null),re=ne.exports;r["default"].use(l["a"]);var oe=new l["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:M},{path:"/explore/:orgId",name:"explore",component:q},{path:"/createOrgID",name:"createOrgID",component:re},{path:"/verify",name:"verifySignature",component:P}]});r["default"].use(a.a),r["default"].config.productionTip=!1,new r["default"]({router:oe,render:function(e){return e(s["default"])}}).$mount("#app")},"574f":function(e,t,n){"use strict";var r=n("922c"),o=n.n(r);o.a},"64a9":function(e,t,n){},"6c96":function(e,t,n){},"79a2":function(e,t){},"83e5":function(e,t,n){},8749:function(e,t,n){"use strict";var r=n("83e5"),o=n.n(r);o.a},"922c":function(e,t,n){},9439:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("el-menu",{attrs:{mode:"horizontal","background-color":"#545c64","text-color":"#fff"}},[n("el-menu-item",{attrs:{index:"1"}},[n("el-button",{on:{click:function(t){return e.$router.push("/")}}},[n("router-link",{attrs:{to:"/"}},[e._v("List")])],1)],1),n("el-menu-item",{attrs:{index:"2"}},[n("el-button",{on:{click:function(t){return e.$router.push("/createOrgID")}}},[n("router-link",{attrs:{to:"/createOrgID"}},[e._v("Create ORG.ID")])],1)],1)],1),n("router-view")],1)},o=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},"9d9b":function(e,t,n){},d466:function(e,t,n){"use strict";var r=n("9d9b"),o=n.n(r);o.a}});
//# sourceMappingURL=app.4de740aa.js.map